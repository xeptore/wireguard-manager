---
import { URL } from "node:url";
import LoginLayout from "@/layouts/LoginLayout.astro";
import Login from "@/components/forms/login.svelte";
import ErrorBanner from "@/components/ErrorBanner";

const reqUrl = new URL(Astro.request.url);
const errorSearchParam = reqUrl.searchParams.get("error");
---

<LoginLayout>
  <div class="flex min-h-screen items-center justify-center text-gray-100">
    <div
      class="flex w-5/6 md:w-2/3 lg:w-1/2 xl:w-1/3 shadow-2xl rounded-2xl flex-col border border-[#191e3a]"
    >
      <div class="flex-1 p-6">
        <Login client:load />
      </div>
    </div>
    <ErrorBanner errorSearchParam={errorSearchParam} client:load />
  </div>
  <!-- <style>
    #error-banner {
      transition-property: bottom;
      transition-duration: 4s;
      transition-timing-function: linear;
    }
    #error-banner.goout {
      bottom: -100%;
    }
  </style>
  <script lang="ts">
    setTimeout(() => {
      const errorBanner = document.getElementById("error-banner");
      const transitionDuration =
        window.getComputedStyle(errorBanner).transitionDuration;
      let transitionDurationMS = 0;
      if (transitionDuration.endsWith("ms")) {
        transitionDurationMS = parseFloat(transitionDuration.slice(0, -2));
      } else {
        transitionDurationMS = parseFloat(transitionDuration.slice(0, -1));
      }
      setTimeout(() => {
        errorBanner?.remove();
      }, transitionDurationMS + 100);
      errorBanner?.classList.toggle("goout");
    }, 3_000);
  </script> -->
</LoginLayout>
